import Node from './Node'
import Motor from './Motor'

/**
 * Manages a DOM element. Exposes a set of recommended APIs for working with
 * DOM efficiently. Currently doesn't do much yet...
 */
class ElementManager {
    constructor(element) {
        this.element = element
    }

    /**
     * @param {Array.string} classes An array of class names to add to the
     * managed element.
     *
     * Note: updating class names with `el.classList.add()` won't thrash the
     * layout. See: http://www.html5rocks.com/en/tutorials/speed/animations
     */
    setClasses (...classes) {
        if (classes.length) { this.element.classList.add(...classes) }
        return this
    }

    /**
     * Apply a style property to the element.
     *
     * @private
     * @param  {string} property The CSS property we will a apply.
     * @param  {string} value    The value the CSS property wil have.
     */
    applyStyle(property, value) {
        this.element.style[property] = value
    }

    addChild(childElementManager) {
        this.element.appendChild(childElementManager.element)
    }

    removeChild(childElementManager) {
        // This conditional check is needed incase the element was already
        // removed from the HTML-API side.
        if (childElementManager.element.parentNode === this.element)
            { this.element.removeChild(childElementManager.element) }
    }

    connectChildElement(childImperativeNode) {
        if (

            // When using the imperative API, this statement is
            // true, so the DOM elements need to be connected.
            !childImperativeNode._elementManager.element.parentNode

            // This condition is irrelevant when strictly using the
            // imperative API. However, it is possible that when
            // using the HTML API that the HTML-API node can be placed
            // somewhere that isn't another HTML-API node, and the
            // imperative Node can be gotten and used to add the
            // node to another imperative Node. In this case, the
            // HTML-API node will be added to the proper HTMLparent.
            || (childImperativeNode._elementManager.element.parentElement &&
                childImperativeNode._elementManager.element.parentElement !== this.element)

            // When an HTML-API node is already child of the
            // relevant parent, or it is child of a shadow root of
            // the relevant parent, there there's nothing to do,
            // everything is already as expected, so the following
            // conditional body is skipped.
        ) {
            this.addChild(childImperativeNode._elementManager)
        }
    }

    disconnectChildElement(childImperativeNode) {
        // If DeclarativeBase#removeChild was called first, we don't need to
        // call this again.
        if (!childImperativeNode._elementManager.element.parentNode) { return }

        this.removeChild(childImperativeNode._elementManager)
    }

    /**
     * Apply the DOMMatrix value to the style of this Node's element.
     */
    applyTransform (domMatrix) {

        // for now, template strings need to be on one line, otherwise Meteor
        // users will have bugs from Meteor's injected line numbers. See:
        // https://github.com/meteor/meteor/issues/9160
        var cssMatrixString = `matrix3d( ${ domMatrix.m11 }, ${ domMatrix.m12 }, ${ domMatrix.m13 }, ${ domMatrix.m14 }, ${ domMatrix.m21 }, ${ domMatrix.m22 }, ${ domMatrix.m23 }, ${ domMatrix.m24 }, ${ domMatrix.m31 }, ${ domMatrix.m32 }, ${ domMatrix.m33 }, ${ domMatrix.m34 }, ${ domMatrix.m41 }, ${ domMatrix.m42 }, ${ domMatrix.m43 }, ${ domMatrix.m44 })`;

        this.applyStyle('transform', cssMatrixString)
    }

    /**
     * [applySize description]
     */
    applySize (size) {
        var x = size.x;
        var y = size.y;

        this.applyStyle('width', `${x}px`)
        this.applyStyle('height', `${y}px`)

        // NOTE: we ignore the Z axis on elements, since they are flat.
    }

    applyOpacity(opacity) {
        this.applyStyle('opacity', opacity)
    }

    applyImperativeNodeProperties(node) {

        // Only Node is Transformable
        if (node instanceof Node) {
            this.applyOpacity(node._properties.opacity)
            this.applyTransform(node._properties.transform)
        }

        // But both Node and Scene are Sizeable
        this.applySize(node._calculatedSize)
    }

    shouldRender() {
        const task = Motor.addRenderTask(() => {
            this.applyStyle('display', 'block')
            Motor.removeRenderTask(task)
        })
    }

    shouldNotRender() {
        const task = Motor.addRenderTask(() => {
            this.applyStyle('display', 'none')
            Motor.removeRenderTask(task)
        })
    }
}

export {ElementManager as default}

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWxlbWVudE1hbmFnZXIuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb3JlL0VsZW1lbnRNYW5hZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSdcbmltcG9ydCBNb3RvciBmcm9tICcuL01vdG9yJ1xuXG4vKipcbiAqIE1hbmFnZXMgYSBET00gZWxlbWVudC4gRXhwb3NlcyBhIHNldCBvZiByZWNvbW1lbmRlZCBBUElzIGZvciB3b3JraW5nIHdpdGhcbiAqIERPTSBlZmZpY2llbnRseS4gQ3VycmVudGx5IGRvZXNuJ3QgZG8gbXVjaCB5ZXQuLi5cbiAqL1xuY2xhc3MgRWxlbWVudE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXkuc3RyaW5nfSBjbGFzc2VzIEFuIGFycmF5IG9mIGNsYXNzIG5hbWVzIHRvIGFkZCB0byB0aGVcbiAgICAgKiBtYW5hZ2VkIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBOb3RlOiB1cGRhdGluZyBjbGFzcyBuYW1lcyB3aXRoIGBlbC5jbGFzc0xpc3QuYWRkKClgIHdvbid0IHRocmFzaCB0aGVcbiAgICAgKiBsYXlvdXQuIFNlZTogaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvc3BlZWQvYW5pbWF0aW9uc1xuICAgICAqL1xuICAgIHNldENsYXNzZXMgKC4uLmNsYXNzZXMpIHtcbiAgICAgICAgaWYgKGNsYXNzZXMubGVuZ3RoKSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi5jbGFzc2VzKVxuICAgICAgICByZXR1cm4gdGhpc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgc3R5bGUgcHJvcGVydHkgdG8gdGhlIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gcHJvcGVydHkgVGhlIENTUyBwcm9wZXJ0eSB3ZSB3aWxsIGEgYXBwbHkuXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSB2YWx1ZSAgICBUaGUgdmFsdWUgdGhlIENTUyBwcm9wZXJ0eSB3aWwgaGF2ZS5cbiAgICAgKi9cbiAgICBhcHBseVN0eWxlKHByb3BlcnR5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGVbcHJvcGVydHldID0gdmFsdWVcbiAgICB9XG5cbiAgICBhZGRDaGlsZChjaGlsZEVsZW1lbnRNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChjaGlsZEVsZW1lbnRNYW5hZ2VyLmVsZW1lbnQpXG4gICAgfVxuXG4gICAgcmVtb3ZlQ2hpbGQoY2hpbGRFbGVtZW50TWFuYWdlcikge1xuICAgICAgICAvLyBUaGlzIGNvbmRpdGlvbmFsIGNoZWNrIGlzIG5lZWRlZCBpbmNhc2UgdGhlIGVsZW1lbnQgd2FzIGFscmVhZHlcbiAgICAgICAgLy8gcmVtb3ZlZCBmcm9tIHRoZSBIVE1MLUFQSSBzaWRlLlxuICAgICAgICBpZiAoY2hpbGRFbGVtZW50TWFuYWdlci5lbGVtZW50LnBhcmVudE5vZGUgPT09IHRoaXMuZWxlbWVudClcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZEVsZW1lbnRNYW5hZ2VyLmVsZW1lbnQpXG4gICAgfVxuXG4gICAgY29ubmVjdENoaWxkRWxlbWVudChjaGlsZEltcGVyYXRpdmVOb2RlKSB7XG4gICAgICAgIGlmIChcblxuICAgICAgICAgICAgLy8gV2hlbiB1c2luZyB0aGUgaW1wZXJhdGl2ZSBBUEksIHRoaXMgc3RhdGVtZW50IGlzXG4gICAgICAgICAgICAvLyB0cnVlLCBzbyB0aGUgRE9NIGVsZW1lbnRzIG5lZWQgdG8gYmUgY29ubmVjdGVkLlxuICAgICAgICAgICAgIWNoaWxkSW1wZXJhdGl2ZU5vZGUuX2VsZW1lbnRNYW5hZ2VyLmVsZW1lbnQucGFyZW50Tm9kZVxuXG4gICAgICAgICAgICAvLyBUaGlzIGNvbmRpdGlvbiBpcyBpcnJlbGV2YW50IHdoZW4gc3RyaWN0bHkgdXNpbmcgdGhlXG4gICAgICAgICAgICAvLyBpbXBlcmF0aXZlIEFQSS4gSG93ZXZlciwgaXQgaXMgcG9zc2libGUgdGhhdCB3aGVuXG4gICAgICAgICAgICAvLyB1c2luZyB0aGUgSFRNTCBBUEkgdGhhdCB0aGUgSFRNTC1BUEkgbm9kZSBjYW4gYmUgcGxhY2VkXG4gICAgICAgICAgICAvLyBzb21ld2hlcmUgdGhhdCBpc24ndCBhbm90aGVyIEhUTUwtQVBJIG5vZGUsIGFuZCB0aGVcbiAgICAgICAgICAgIC8vIGltcGVyYXRpdmUgTm9kZSBjYW4gYmUgZ290dGVuIGFuZCB1c2VkIHRvIGFkZCB0aGVcbiAgICAgICAgICAgIC8vIG5vZGUgdG8gYW5vdGhlciBpbXBlcmF0aXZlIE5vZGUuIEluIHRoaXMgY2FzZSwgdGhlXG4gICAgICAgICAgICAvLyBIVE1MLUFQSSBub2RlIHdpbGwgYmUgYWRkZWQgdG8gdGhlIHByb3BlciBIVE1McGFyZW50LlxuICAgICAgICAgICAgfHwgKGNoaWxkSW1wZXJhdGl2ZU5vZGUuX2VsZW1lbnRNYW5hZ2VyLmVsZW1lbnQucGFyZW50RWxlbWVudCAmJlxuICAgICAgICAgICAgICAgIGNoaWxkSW1wZXJhdGl2ZU5vZGUuX2VsZW1lbnRNYW5hZ2VyLmVsZW1lbnQucGFyZW50RWxlbWVudCAhPT0gdGhpcy5lbGVtZW50KVxuXG4gICAgICAgICAgICAvLyBXaGVuIGFuIEhUTUwtQVBJIG5vZGUgaXMgYWxyZWFkeSBjaGlsZCBvZiB0aGVcbiAgICAgICAgICAgIC8vIHJlbGV2YW50IHBhcmVudCwgb3IgaXQgaXMgY2hpbGQgb2YgYSBzaGFkb3cgcm9vdCBvZlxuICAgICAgICAgICAgLy8gdGhlIHJlbGV2YW50IHBhcmVudCwgdGhlcmUgdGhlcmUncyBub3RoaW5nIHRvIGRvLFxuICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBpcyBhbHJlYWR5IGFzIGV4cGVjdGVkLCBzbyB0aGUgZm9sbG93aW5nXG4gICAgICAgICAgICAvLyBjb25kaXRpb25hbCBib2R5IGlzIHNraXBwZWQuXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZChjaGlsZEltcGVyYXRpdmVOb2RlLl9lbGVtZW50TWFuYWdlcilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpc2Nvbm5lY3RDaGlsZEVsZW1lbnQoY2hpbGRJbXBlcmF0aXZlTm9kZSkge1xuICAgICAgICAvLyBJZiBEZWNsYXJhdGl2ZUJhc2UjcmVtb3ZlQ2hpbGQgd2FzIGNhbGxlZCBmaXJzdCwgd2UgZG9uJ3QgbmVlZCB0b1xuICAgICAgICAvLyBjYWxsIHRoaXMgYWdhaW4uXG4gICAgICAgIGlmICghY2hpbGRJbXBlcmF0aXZlTm9kZS5fZWxlbWVudE1hbmFnZXIuZWxlbWVudC5wYXJlbnROb2RlKSByZXR1cm5cblxuICAgICAgICB0aGlzLnJlbW92ZUNoaWxkKGNoaWxkSW1wZXJhdGl2ZU5vZGUuX2VsZW1lbnRNYW5hZ2VyKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGx5IHRoZSBET01NYXRyaXggdmFsdWUgdG8gdGhlIHN0eWxlIG9mIHRoaXMgTm9kZSdzIGVsZW1lbnQuXG4gICAgICovXG4gICAgYXBwbHlUcmFuc2Zvcm0gKGRvbU1hdHJpeCkge1xuXG4gICAgICAgIC8vIGZvciBub3csIHRlbXBsYXRlIHN0cmluZ3MgbmVlZCB0byBiZSBvbiBvbmUgbGluZSwgb3RoZXJ3aXNlIE1ldGVvclxuICAgICAgICAvLyB1c2VycyB3aWxsIGhhdmUgYnVncyBmcm9tIE1ldGVvcidzIGluamVjdGVkIGxpbmUgbnVtYmVycy4gU2VlOlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWV0ZW9yL21ldGVvci9pc3N1ZXMvOTE2MFxuICAgICAgICB2YXIgY3NzTWF0cml4U3RyaW5nID0gYG1hdHJpeDNkKCAkeyBkb21NYXRyaXgubTExIH0sICR7IGRvbU1hdHJpeC5tMTIgfSwgJHsgZG9tTWF0cml4Lm0xMyB9LCAkeyBkb21NYXRyaXgubTE0IH0sICR7IGRvbU1hdHJpeC5tMjEgfSwgJHsgZG9tTWF0cml4Lm0yMiB9LCAkeyBkb21NYXRyaXgubTIzIH0sICR7IGRvbU1hdHJpeC5tMjQgfSwgJHsgZG9tTWF0cml4Lm0zMSB9LCAkeyBkb21NYXRyaXgubTMyIH0sICR7IGRvbU1hdHJpeC5tMzMgfSwgJHsgZG9tTWF0cml4Lm0zNCB9LCAkeyBkb21NYXRyaXgubTQxIH0sICR7IGRvbU1hdHJpeC5tNDIgfSwgJHsgZG9tTWF0cml4Lm00MyB9LCAkeyBkb21NYXRyaXgubTQ0IH0pYDtcblxuICAgICAgICB0aGlzLmFwcGx5U3R5bGUoJ3RyYW5zZm9ybScsIGNzc01hdHJpeFN0cmluZylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbYXBwbHlTaXplIGRlc2NyaXB0aW9uXVxuICAgICAqL1xuICAgIGFwcGx5U2l6ZSAoc2l6ZSkge1xuICAgICAgICBjb25zdCB7eCx5fSA9IHNpemVcblxuICAgICAgICB0aGlzLmFwcGx5U3R5bGUoJ3dpZHRoJywgYCR7eH1weGApXG4gICAgICAgIHRoaXMuYXBwbHlTdHlsZSgnaGVpZ2h0JywgYCR7eX1weGApXG5cbiAgICAgICAgLy8gTk9URTogd2UgaWdub3JlIHRoZSBaIGF4aXMgb24gZWxlbWVudHMsIHNpbmNlIHRoZXkgYXJlIGZsYXQuXG4gICAgfVxuXG4gICAgYXBwbHlPcGFjaXR5KG9wYWNpdHkpIHtcbiAgICAgICAgdGhpcy5hcHBseVN0eWxlKCdvcGFjaXR5Jywgb3BhY2l0eSlcbiAgICB9XG5cbiAgICBhcHBseUltcGVyYXRpdmVOb2RlUHJvcGVydGllcyhub2RlKSB7XG5cbiAgICAgICAgLy8gT25seSBOb2RlIGlzIFRyYW5zZm9ybWFibGVcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5T3BhY2l0eShub2RlLl9wcm9wZXJ0aWVzLm9wYWNpdHkpXG4gICAgICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtKG5vZGUuX3Byb3BlcnRpZXMudHJhbnNmb3JtKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnV0IGJvdGggTm9kZSBhbmQgU2NlbmUgYXJlIFNpemVhYmxlXG4gICAgICAgIHRoaXMuYXBwbHlTaXplKG5vZGUuX2NhbGN1bGF0ZWRTaXplKVxuICAgIH1cblxuICAgIHNob3VsZFJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgdGFzayA9IE1vdG9yLmFkZFJlbmRlclRhc2soKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlKCdkaXNwbGF5JywgJ2Jsb2NrJylcbiAgICAgICAgICAgIE1vdG9yLnJlbW92ZVJlbmRlclRhc2sodGFzaylcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzaG91bGROb3RSZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBNb3Rvci5hZGRSZW5kZXJUYXNrKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZSgnZGlzcGxheScsICdub25lJylcbiAgICAgICAgICAgIE1vdG9yLnJlbW92ZVJlbmRlclRhc2sodGFzaylcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCB7RWxlbWVudE1hbmFnZXIgYXMgZGVmYXVsdH1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLElBQUksTUFBTSxRQUFRO0FBQ3pCLE9BQU8sS0FBSyxNQUFNLFNBQVM7Ozs7OztBQU0zQixNQUFNLGNBQWMsQ0FBQztJQUNqQixXQUFXLENBQUMsT0FBTyxFQUFFO1FBQ2pCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTztLQUN6Qjs7Ozs7Ozs7O0lBU0QsVUFBVSxDQUFDLENBQUMsR0FBRyxPQUFPLEVBQUU7UUFDcEIsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUEsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUE7UUFDMUQsT0FBTyxJQUFJO0tBQ2Q7Ozs7Ozs7OztJ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