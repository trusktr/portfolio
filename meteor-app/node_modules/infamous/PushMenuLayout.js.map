{"version":3,"file":"PushMenuLayout.js","sources":["../src/PushMenuLayout.js"],"sourcesContent":["/*\n * LICENSE\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n */\n\nimport jss from './lib/jss';\n\nimport Surface from 'famous/src/core/Surface';\nimport Transitionable from 'famous/src/transitions/Transitionable';\nimport Easing from 'famous/src/transitions/Easing';\nimport TouchSync from 'famous/src/inputs/TouchSync';\nimport GenericSync from 'famous/src/inputs/GenericSync';\n\nimport Plane from './Plane';\nimport Molecule from './Molecule';\nimport {simpleExtend} from './utils'\n\nimport callAfter from 'army-knife/callAfter';\n\n/**\n * A scenegraph with two Molecule leafnodes: the menu area and the content\n * area. The menu area is hidden beyond the edge of the screen while the\n * content area is visible. Swiping in from the edge of the screen reveals the\n * menu, putting the content area out of focus. A mouse can also be used, and\n * hovering near the edge of the screen also reveals the menu.\n *\n * Note: This layout is mostly useful if it exists at the root of a context so\n * that the menu is clipped when it is closed (off to the side), otherwise the\n * menu will be visible beyond the boundary of the container that contains the\n * PushMenuLayout.\n *\n * Note: If you've called `openMenu` or `closeMenu` with a callback, the callback\n * will be canceled if a drag or hover on the menu happens before the animation\n * has completed. Please open an issue on GitHub if you have any opinion\n * against this. :) Maybe we can add a boolean option for this behavior.\n *\n * TODO: Embed working example here.\n *\n * @class PushMenuLayout\n * @extends Molecule\n */\nexport class PushMenuLayout extends Molecule {\n\n    /**\n     * Creates a new PushMenuLayout.\n     *\n     * @constructor\n     * @param {Object} options The options to instantiate a `PushMenuLayout` with.\n     *\n     * TODO v0.1.0: Handle `PushMenuLayout`-specific user options. Currently they\n     * just get passed into super() for the Molecule constructor to handle.\n     */\n    constructor(initialOptions) {\n        super(initialOptions);\n\n        // Add default values for this PushMenuLayout\n        // TODO: Make default options static for the class.\n        simpleExtend(this._.defaultOptions, {\n            menuSide: 'left', // left or right\n            menuWidth: 200,\n            menuHintSize: 10, // the amount of the menu that is visible before opening the menu.\n            pushAreaWidth: 40, // the area on the screen edge that the user can touch and drag to push out the menu.\n            animationDuration: 1000,\n            animationType: 'foldDown', // options: foldDown moveBack\n\n            // TODO: Background color for the whole layout should be the color that the fade fades to.\n            // TODO: Replace fade star/end colors with a fog color value and intensity.\n            fade: true, // when content recedes, it fades into the fog.\n            fadeStartColor: 'rgba(255,255,255,0)',\n            fadeEndColor: 'rgba(255,255,255,1)',\n\n            blur: false, // XXX: WIP, so false by default.\n            blurRadius: 5\n        })\n\n        // TODO: performance hit, this setter is invoked in the Molecule constructor, then here again.\n        this.options = initialOptions\n\n        // TODO v0.1.0: Mark these as private.\n            // TODO v0.1.0: this.contentWidth should be the width of whatever is containing\n            // the layout, but we're just using it as a whole-page app for now. Get\n            // size from a commit? UPDATE: See the new famous/src/views/SizeAwareView\n            this.contentWidth = document.body.clientWidth - this.options.menuHintSize;\n\n            // Changing these values outside of an instance of PushMenuLayout might\n            // cause the layout to break. They are designed to be modified\n            // internally only.\n            this.isOpen = false;\n            this.isOpening = false;\n            this.isClosing = false;\n            this.isAnimating = false; // keep track of whether the menu is opening or closing.\n            this.isBeingDragged = false; // whether the user is dragging/pushing the menu or not.\n            this.transitionCallback = undefined; // holds the callback to the current open or close menu animation.\n\n        // Set the touch sync for pulling/pushing the menu open/closed.\n        GenericSync.register({\n            touch: TouchSync\n        });\n\n        this._createComponents();\n        this._initializeEvents();\n    }\n\n    /**\n     * See Molecule.setOptions\n     *\n     * @override\n     */\n    setOptions(newOptions) {\n        super.setOptions(newOptions)\n    }\n\n    /**\n     * See Molecule.resetOptions\n     *\n     * @override\n     */\n    resetOptions() {\n        super.resetOptions()\n    }\n\n    /**\n     * Creates the menu area, content area, `Plane` for the fade effect, etc.\n     *\n     * @private\n     */\n    _createComponents() {\n        var layout = this;\n\n        this.touchSync = new GenericSync(['touch']);\n\n        this.alignment = (this.options.menuSide == \"left\"? 0: 1);\n        this.animationTransition = new Transitionable(0);\n\n        this.mainMol = new Molecule();\n\n        this.menuMol = new Molecule({\n            size: [this.options.menuWidth,undefined]\n        });\n        this.menuMol.oldTransform = this.menuMol.transform;\n        this.menuMol.transform = function() { // override\n            var currentPosition = layout.animationTransition.get();\n            switch(layout.options.animationType) {\n                case \"foldDown\":\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setTranslateX(\n                        layout.options.menuSide == 'left'?\n                            currentPosition *  (layout.options.menuWidth-layout.options.menuHintSize)/*range*/ - (layout.options.menuWidth-layout.options.menuHintSize)/*offset*/:\n                            currentPosition * -(layout.options.menuWidth-layout.options.menuHintSize)/*range*/ + (layout.options.menuWidth-layout.options.menuHintSize)/*offset*/\n                    );\n                    break;\n                case \"moveBack\":\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setTranslateX(\n                        layout.options.menuSide == 'left'?\n                            currentPosition *  (layout.options.menuWidth-layout.options.menuHintSize)/*range*/ - (layout.options.menuWidth-layout.options.menuHintSize)/*offset*/:\n                            currentPosition * -(layout.options.menuWidth-layout.options.menuHintSize)/*range*/ + (layout.options.menuWidth-layout.options.menuHintSize)/*offset*/\n                    );\n                    break;\n            }\n            return this.oldTransform.get();\n        }.bind(this.menuMol);\n\n        // contains the user's menu content.\n        this.menuContentMol = new Molecule();\n\n        this.contentMol = new Molecule({\n            size: [this.contentWidth,undefined]\n        });\n        this.contentMol.oldTransform = this.contentMol.transform;\n        this.contentMol.transform = function() { // override\n            var currentPosition = layout.animationTransition.get();\n            switch(layout.options.animationType) {\n                case \"foldDown\":\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setTranslateX(\n                        layout.options.menuSide == 'left'?\n                            currentPosition *  (layout.options.menuWidth - layout.options.menuHintSize)/*range*/ + layout.options.menuHintSize/*offset*/:\n                            currentPosition * -(layout.options.menuWidth - layout.options.menuHintSize)/*range*/ - layout.options.menuHintSize/*offset*/\n                    );\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setRotateY(\n                        layout.options.menuSide == 'left'?\n                            currentPosition *  Math.PI/8:\n                            currentPosition * -Math.PI/8\n                    );\n                    break;\n                case \"moveBack\":\n                    var depth = 100;\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setTranslateX(\n                        layout.options.menuSide == 'left'?\n                            layout.options.menuHintSize:\n                            -layout.options.menuHintSize\n                    );\n                    this.oldTransform.setTranslateZ(\n                        currentPosition * -depth\n                    );\n                    break;\n            }\n            return this.oldTransform.get();\n        }.bind(this.contentMol);\n\n        this.menuTouchPlane = new Plane({\n            size: [this.options.menuWidth + this.options.pushAreaWidth - this.options.menuHintSize, undefined],\n            properties: {\n                zIndex: '-1000' // below everything\n            }\n        });\n\n        this.mainMol.setOptions({\n            origin: [this.alignment, 0.5],\n            align: [this.alignment, 0.5]\n        });\n        this.menuMol.setOptions({\n            origin: [this.alignment, 0.5],\n            align: [this.alignment, 0.5]\n        });\n        this.contentMol.setOptions({\n            origin: [this.alignment, 0.5],\n            align: [this.alignment, 0.5]\n        });\n\n        // FIXME: WHY THE EFF must I also set align and origin on menuTouchPlane\n        // when I've already set it on it's parent (this.menuMol)?????\n        this.menuTouchPlane.setOptions({\n            origin: [this.alignment, 0.5],\n            align: [this.alignment, 0.5]\n        });\n\n        // Bring the menu content molecule and touch plane forward just\n        // slightly so they're just above the content and content's fade plane,\n        // so touch and mouse interaction works. HTML, the bad parts. ;)\n        this.menuContentMol.transform.setTranslateZ(2);\n        this.menuTouchPlane.transform.setTranslateZ(2);\n\n        /*\n         * Styles for the fadePlane\n         */\n        // TODO: move this somewhere else . it's specific for each animation\n        this.updateStyles = function() {\n            var startColor\n            var endColor\n\n            switch(this.options.animationType) {\n                case \"foldDown\":\n                    startColor = this.options.fadeStartColor\n                    endColor = this.options.fadeEndColor\n                    break;\n                case \"moveBack\":\n                    startColor = endColor = this.options.fadeEndColor\n                    break;\n            }\n\n            var styles = {\n                '.infamous-fadeLeft': {\n                    background: [\n                        endColor,\n                        '-moz-linear-gradient(left, '+endColor+' 0%, '+startColor+' 100%)',\n                        '-webkit-gradient(left top, right top, color-stop(0%, '+endColor+'), color-stop(100%, '+startColor+'))',\n                        '-webkit-linear-gradient(left, '+endColor+' 0%, '+startColor+' 100%)',\n                        '-o-linear-gradient(left, '+endColor+' 0%, '+startColor+' 100%)',\n                        '-ms-linear-gradient(left, '+endColor+' 0%, '+startColor+' 100%)',\n                        'linear-gradient(to right, '+endColor+' 0%, '+startColor+' 100%)'\n                    ],\n                    filter: 'progid:DXImageTransform.Microsoft.gradient( startColorstr=\\'#cc000000\\', endColorstr=\\'#4d000000\\', GradientType=1 )'\n                },\n                '.infamous-fadeRight': {\n                    background: [\n                        startColor,\n                        '-moz-linear-gradient(left, '+startColor+' 0%, '+endColor+' 100%)',\n                        '-webkit-gradient(left top, right top, color-stop(0%, '+startColor+'), color-stop(100%, '+endColor+'))',\n                        '-webkit-linear-gradient(left, '+startColor+' 0%, '+endColor+' 100%)',\n                        '-o-linear-gradient(left, '+startColor+' 0%, '+endColor+' 100%)',\n                        '-ms-linear-gradient(left, '+startColor+' 0%, '+endColor+' 100%)',\n                        'linear-gradient(to right, '+startColor+' 0%, '+endColor+' 100%)'\n                    ],\n                    filter: 'progid:DXImageTransform.Microsoft.gradient( startColorstr=\\'#4d000000\\', endColorstr=\\'#cc000000\\', GradientType=1 )'\n                }\n            };\n\n            if (this.fadeStylesheet) { this.fadeStylesheet.detach(); }\n            this.fadeStylesheet = jss.createStyleSheet(styles);\n            this.fadeStylesheet.attach();\n        };\n\n        if (this.options.fade) {\n            this.updateStyles();\n\n            this.fadePlane = new Plane({\n                size: [undefined,undefined],\n                classes: [\n                    // TODO: switch to jss namespace.\n                    (this.options.menuSide == 'left'? 'infamous-fadeRight': 'infamous-fadeLeft')\n                ],\n                properties: {\n                    zIndex: '1000',\n                    pointerEvents: 'none'\n                }\n            });\n\n            // FIXME: Why the EFF must I also set align and origin on fadePlane when\n            // I've already set it on it's parent (this.contentMol)?????\n            this.fadePlane.setOptions({\n                origin: [this.alignment, 0.5],\n                align: [this.alignment, 0.5]\n            });\n\n            // move the fadePlane forward by 1px so it doesn't glitch out.\n            // Chrome will make the fadePlane and the surface in the content\n            // area (if any) blink randomly when the two surfaces are in the\n            // same exact position together.\n            this.fadePlane.transform.setTranslateZ(1);\n\n            this.fadePlane.setOptions({\n                opacity: this.animationTransition\n            });\n\n            // TODO: Make fadePlane a sibling to menuMol and contentMol so that\n            // contentMol contains only the user;s content. This will affect\n            // the code in this.render().\n            this.contentMol.add(this.fadePlane);\n        }\n\n        this.add(this.mainMol);\n        this.mainMol.add(this.contentMol);\n        this.menuMol.add(this.menuTouchPlane);\n        this.menuMol.add(this.menuContentMol);\n        this.mainMol.add(this.menuMol);\n        // TODO: Also create and add a background plane for the menu area so it will catch events that might fall through the menu content.\n    }\n\n    /**\n     * Sets up the events for the touch and mouse interaction that opens and\n     * closes the menu.\n     *\n     * @private\n     */\n    _initializeEvents() {\n\n        // move the menu, following the user's drag. Don't let the user drag the menu past the menu width.\n        this.options.handler.on('update', function(event) { // update == drag\n            this.isBeingDragged = true;\n\n            // stop the current transitions if any, along with the current callback if any.\n            this._haltAnimation(true);\n\n            var currentPosition = this.animationTransition.get();\n\n            // TODO: handle the right-side menu.\n            switch(this.options.animationType) {\n                case \"foldDown\":\n                    this.animationTransition.set(currentPosition + event.delta[0] / (this.options.menuWidth - this.options.menuHintSize));\n                    break;\n                case \"moveBack\":\n                    this.animationTransition.set(currentPosition + event.delta[0] / (this.options.menuWidth - this.options.menuHintSize));\n                    break;\n            }\n\n            currentPosition = this.animationTransition.get();\n\n            if (currentPosition > 1) {\n                this.animationTransition.set(1);\n            }\n            else if (currentPosition < 0) {\n                this.animationTransition.set(0);\n            }\n        }.bind(this));\n\n        this.options.handler.on('end', function(event) {\n            this.isBeingDragged = false;\n\n            var currentPosition = this.animationTransition.get();\n\n            if (currentPosition < 0.5) {\n                this.closeMenu();\n            }\n            else {\n                this.openMenu();\n            }\n        }.bind(this));\n\n        // TODO v0.1.0: Use a SizeAwareView instead of relying on the body, since we\n        // might not be directly in the body.\n        window.addEventListener('resize', function(event) {\n            this.contentWidth = document.body.clientWidth - this.options.menuHintSize;\n            this.contentMol.setOptions({size: [this.contentWidth, undefined]});\n        }.bind(this));\n\n        /*\n         * Wire up events\n         * TODO: consolidate dup code here and in setMenu\n         */\n        this.menuTouchPlane.pipe(this.touchSync);\n        this.menuTouchPlane.on('mouseenter', function() {\n            if (!this.isOpening) {\n                this.openMenu();\n            }\n        }.bind(this))\n        this.menuTouchPlane.on('mouseleave', function() {\n            if (!this.isClosing) {\n                this.closeMenu();\n            }\n        }.bind(this))\n        this.touchSync.pipe(this.options.handler);\n    }\n\n    /**\n     * Add a scenegraph to the content area of the PushMenuLayout. You can put\n     * anything you want into the content area (magical 3D things for example),\n     * just be careful not to let them cover the menu or you'll block the user\n     * from interacting with the menu.\n     *\n     * @param {module: famous/src/core/RenderNode} node A scenegraph, i.e. a\n     * RenderNode with stuff in it.\n     *\n     * TODO: Accept plain renderables, f.e. Surfaces, etc. This change requires\n     * also modifying the code in this.render() to account for renderables.\n     *\n     * TODO: Make a sibling method to reset the content area.\n     */\n    setContent(node) {\n        this.contentMol.add(node)\n    }\n\n    /**\n     * Add a scenegraph to the menu area of the PushMenuLayout. If the object\n     * that you pass into setMenu is an infamous component, or a famo.us\n     * Surface, then it's events will be piped to this PushMenuLayout's input\n     * sync so that the user can open and close the menu with touch or mouse.\n     * General advice here would be to keep whatever you put into the menu\n     * contained within the boundaries of the menu or you might have touch and\n     * mouse interaction outside of the menu.\n     *\n     * @param {module: famous/src/core/RenderNode} node A scenegraph, i.e. a\n     * RenderNode with stuff in it.\n     *\n     * TODO: Accept plain renderables, f.e. Surfaces, etc.\n     *\n     * TODO: Remove old content before adding new content.\n     */\n    setMenu(node) {\n        this.menuContentMol.add(node)\n        if (node instanceof Molecule) {\n            node.pipe(this.touchSync)\n            node.on('mouseenter', function() {\n                if (!this.isOpening) {\n                    this.openMenu();\n                }\n            }.bind(this))\n            node.on('mouseleave', function() {\n                if (!this.isClosing) {\n                    this.closeMenu();\n                }\n            }.bind(this))\n        }\n    }\n\n    // TODO: replace menu easing with physics so the user can throw the menu,\n    // using initial velocity and drag to slow it down, and stop immediately\n    // when it hits the fully-open or fully-closed positions.\n\n    /**\n     * Opens the menu.\n     *\n     * @param {Function} callback The function to be called when the animation finishes.\n     * @param {boolean} [cancelPreviousCallback=false] This is optional. If\n     * true, then the callback of a previous open or close animation will be\n     * canceled if that animation was still inprogress when this method is\n     * called, otherwise the callback of the previous open or close animation\n     * will be fired immediately before the animation for this animation begins.\n     */\n    openMenu(callback, cancelPreviousCallback) {\n        this._haltAnimation(cancelPreviousCallback);\n\n        this.isClosing = false;\n        this.isOpening = true;\n\n        this._animate('open', callback);\n    }\n\n    /**\n     * Closes the menu.\n     *\n     * @param {Function} callback The function to be called when the animation finishes.\n     * @param {boolean} [cancelPreviousCallback=false] This is optional. If\n     * true, then the callback of a previous open or close animation will be\n     * canceled if that animation was still inprogress when this method is\n     * called, otherwise the callback of the previous open or close animation\n     * will be fired immediately before the animation for this animation begins.\n     */\n    closeMenu(callback, cancelPreviousCallback) {\n        this._haltAnimation(cancelPreviousCallback);\n\n        this.isClosing = true;\n        this.isOpening = false;\n\n        this._animate('close', callback);\n    }\n\n    /**\n     * Toggles the menu open or closed. If the menu is open or is opening, then it will now start\n     * closing, and vice versa.\n     *\n     * @param {Function} callback The function to be called when the animation finishes.\n     * @param {boolean} [cancelPreviousCallback=false] This is optional. If\n     * true, then the callback of a previous open or close animation will be\n     * canceled if that animation was still inprogress when this method is\n     * called, otherwise the callback of the previous open or close animation\n     * will be fired immediately before the animation for this animation begins.\n     */\n    toggleMenu(callback, cancelPreviousCallback) {\n        if (this.isOpen || this.isOpening) {\n            this.closeMenu(callback, cancelPreviousCallback);\n        }\n        else if (!this.isOpen || this.isClosing) {\n            this.openMenu(callback, cancelPreviousCallback);\n        }\n    }\n\n    /**\n     * Animates the menu to it's target state.\n     *\n     * @private\n     * @param {String} targetState The name of the state to animate to.\n     * @param {Function} callback The function to call after the animation completes.\n     */\n    _animate(targetState, callback) {\n        this.isAnimating = true;\n        this.transitionCallback = callback;\n        var _callback;\n\n        var self = this;\n        function setupCallback(numberOfTransitions) {\n            // Fire callback after numberOfTransitions calls, when the 4 transitions are complete.\n            _callback = callAfter(numberOfTransitions, function() {\n                self.isAnimating = self.isOpening = self.isClosing = false;\n                self.isOpen = targetState == 'open'? true: false;\n                if (typeof self.transitionCallback == 'function') {\n                    self.transitionCallback();\n                }\n                self.transitionCallback = undefined;\n            }.bind(self));\n        }\n\n        setupCallback(1);\n        if (targetState == 'open') {\n            this.animationTransition.set(1, {duration: this.options.animationDuration, curve: Easing.outExpo}, _callback);\n        }\n        else if (targetState == 'close') {\n            this.animationTransition.set(0, {duration: this.options.animationDuration, curve: Easing.outExpo}, _callback);\n        }\n    }\n\n    /**\n     * Halts the current animation, if any.\n     *\n     * @private\n     * @param {boolean} [cancelCallback=false] Defaults to false. If true, the\n     * halted animation's callback won't fire, otherwise it will be fired.\n     */\n    _haltAnimation(cancelCallback) {\n        if (this.isAnimating) {\n            if (!cancelCallback && typeof this.transitionCallback == 'function') {\n                this.transitionCallback();\n            }\n            this.transitionCallback = undefined;\n            this.animationTransition.halt();\n        }\n    }\n\n    /**\n     * @override\n     */\n    render() {\n\n        // Blur the content if this.options.blur is true, and the animation is moveBack.\n        //\n        // TODO: Make the item to to be blur specifiable, perhaps with a method on\n        // this.\n        if (this.options.blur && this.options.fade && this.options.animationType == 'moveBack') {\n            let momentaryBlur = (this.animationTransition.get() * this.options.blurRadius)\n            let filter = {\n                \"-webkit-filter\": 'blur('+momentaryBlur+'px)',\n                \"-moz-filter\":    'blur('+momentaryBlur+'px)',\n                \"-ms-filter\":     'blur('+momentaryBlur+'px)',\n                \"-o-filter\":      'blur('+momentaryBlur+'px)',\n                filter:           'blur('+momentaryBlur+'px)'\n            }\n\n            // TODO TODO TODO v0.1.0: Make fadePlane a sibling with menu and\n            // content molecules or the following breaks if fade is false.\n            // Then remove the check for this.options.fade in the previous if\n            // statement above.\n            if (this.contentMol._child[1].get() instanceof Surface) {\n                this.contentMol.get().setProperties(filter)\n            }\n            else if (this.contentMol._child[1] instanceof Plane) {\n                this.contentMol._child[1].surface.setProperties(filter)\n            }\n        }\n\n        return super.render()\n    }\n}\nexport default PushMenuLayout;\n"],"names":["super"],"mappings":"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"}