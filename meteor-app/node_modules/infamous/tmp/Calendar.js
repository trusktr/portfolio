/*
 * LICENSE
 *
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 */

import Transform from 'famous/src/core/Transform';
import Transitionable from 'famous/src/transitions/Transitionable';
import Easing from 'famous/src/transitions/Easing';

import Molecule from './Molecule';
import Grid from './Grid';
import DoubleSidedPlane from './DoubleSidedPlane';

import forLength from 'army-knife/forLength';

/**
 * A calendar widget for selecting a date (WIP).
 *
 * @class Calendar
 * @extends Molecule
 */
export var Calendar = (function (Molecule) {
    function Calendar(calendarSize, transition) {
        Molecule.call(this, {size: calendarSize});

        this.transition = transition;
        this.flipSide = 0; // 0 means the initial front faces are showing, 1 means the initial back faces are showing.
        this.columnsRows = [7,6];
        this.planes = [];

        this._initializeTransitions();
        this._createGrid();

        setTimeout( function() {
            this.transitions[this.transition]();
            setInterval(this.transitions[this.transition], 2000);
        }.bind(this) , 800);
    }

    if ( Molecule ) Calendar.__proto__ = Molecule;
    Calendar.prototype = Object.create( Molecule && Molecule.prototype );
    Calendar.prototype.constructor = Calendar;

    /**
     * Creates the grid used for the layout of the day cells.
     *
     * @private
     */
    Calendar.prototype._createGrid = function _createGrid () {
        const grid = new Grid(this.columnsRows[0], this.columnsRows[1], this.options.size);

        forLength(this.columnsRows[0]*this.columnsRows[1], function(i) {
            const plane = new DoubleSidedPlane({
                properties: {
                    background: 'teal',
                }
            });
            this.planes.push(plane);
        }.bind(this));

        grid.setChildren(this.planes);
        this.add(grid);
    };

    /**
     * Set up `this.transitions`, containing the available month-to-month
     * transitions.
     *
     * @private
     */
    Calendar.prototype._initializeTransitions = function _initializeTransitions () {
        this.transitions = {
            flipDiagonal: function() {
                this.flipSide = +!this.flipSide;
                // determine which dimension of the grid is shorter and which is longer.
                let shortest = 0;
                let longest;
                this.columnsRows.forEach(function(item, index) {
                    if (item < this.columnsRows[shortest])
                        { shortest = index; }
                }.bind(this));
                longest = +!shortest;

                // for each diagonal of the grid, flip those cells.
                forLength(this.columnsRows[0]+this.columnsRows[1]-1, function(column) {
                    forLength(this.columnsRows[shortest], function(row) {
                        if (column-row >= 0 && column-row < this.columnsRows[longest]) {
                            const plane = this.planes[column-row + this.columnsRows[longest]*row];
                            flipOne(plane, column);
                        }
                    }.bind(this));
                }.bind(this));

                function flipOne(item, column) {
                    if (typeof item.__targetRotation == 'undefined') {
                        item.__targetRotation = new Transitionable(0);
                    }
                    const rotation = new Transitionable(item.__targetRotation.get());
                    item.__targetRotation.set(item.__targetRotation.get()+Math.PI);

                    //item.get().transformFrom(function() {
                        //return Transform.rotateY(rotation.get());
                    //});
                    item.children[0].get().transformFrom(function() {
                        return Transform.rotateY(rotation.get());
                    });
                    item.children[1].get().transformFrom(function() {
                        return Transform.rotateY(rotation.get()+Math.PI);
                    });

                    setTimeout(function() {
                        rotation.set(item.__targetRotation.get(), { duration: 2000, curve: Easing.outExpo });
                    }, 0+50*column);
                }
            }.bind(this)
        };
    };

    return Calendar;
}(Molecule));
export default Calendar;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FsZW5kYXIuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9DYWxlbmRhci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTElDRU5TRVxuICpcbiAqIFRoaXMgU291cmNlIENvZGUgRm9ybSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBvZiB0aGUgTW96aWxsYSBQdWJsaWNcbiAqIExpY2Vuc2UsIHYuIDIuMC4gSWYgYSBjb3B5IG9mIHRoZSBNUEwgd2FzIG5vdCBkaXN0cmlidXRlZCB3aXRoIHRoaXNcbiAqIGZpbGUsIFlvdSBjYW4gb2J0YWluIG9uZSBhdCBodHRwOi8vbW96aWxsYS5vcmcvTVBMLzIuMC8uXG4gKlxuICovXG5cbmltcG9ydCBUcmFuc2Zvcm0gZnJvbSAnZmFtb3VzL3NyYy9jb3JlL1RyYW5zZm9ybSc7XG5pbXBvcnQgVHJhbnNpdGlvbmFibGUgZnJvbSAnZmFtb3VzL3NyYy90cmFuc2l0aW9ucy9UcmFuc2l0aW9uYWJsZSc7XG5pbXBvcnQgRWFzaW5nIGZyb20gJ2ZhbW91cy9zcmMvdHJhbnNpdGlvbnMvRWFzaW5nJztcblxuaW1wb3J0IE1vbGVjdWxlIGZyb20gJy4vTW9sZWN1bGUnO1xuaW1wb3J0IEdyaWQgZnJvbSAnLi9HcmlkJztcbmltcG9ydCBEb3VibGVTaWRlZFBsYW5lIGZyb20gJy4vRG91YmxlU2lkZWRQbGFuZSc7XG5cbmltcG9ydCBmb3JMZW5ndGggZnJvbSAnYXJteS1rbmlmZS9mb3JMZW5ndGgnO1xuXG4vKipcbiAqIEEgY2FsZW5kYXIgd2lkZ2V0IGZvciBzZWxlY3RpbmcgYSBkYXRlIChXSVApLlxuICpcbiAqIEBjbGFzcyBDYWxlbmRhclxuICogQGV4dGVuZHMgTW9sZWN1bGVcbiAqL1xuZXhwb3J0IGNsYXNzIENhbGVuZGFyIGV4dGVuZHMgTW9sZWN1bGUge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGBDYWxlbmRhcmAgd2l0aCB0aGUgZ2l2ZW4gRmFtby51cy1zdHlsZSBzaXplIGFycmF5IGFuZFxuICAgICAqIHRyYW5zaXRpb24uIFRoZSB0cmFuc2l0aW9uIGlzIHRoZSB0eXBlIG9mIGFuaW1hdGlvbiB1c2VkIHdoZW4gc3dpdGNoaW5nXG4gICAgICogYmV0d2VlbiBtb250aHMuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBjYWxlbmRhclNpemUgQSBGYW1vLnVzLXN0eWxlIHdpZHRoL2hlaWdodCBzaXplIGFycmF5LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0cmFuc2l0aW9uIFRoZSBuYW1lIG9mIHRoZSBhbmltYXRpb24gdHJhbnNpdGlvbiB0byB1c2Ugd2hlbiBzd2l0Y2hpbmcgbW9udGhzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNhbGVuZGFyU2l6ZSwgdHJhbnNpdGlvbikge1xuICAgICAgICBzdXBlcih7c2l6ZTogY2FsZW5kYXJTaXplfSk7XG5cbiAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcbiAgICAgICAgdGhpcy5mbGlwU2lkZSA9IDA7IC8vIDAgbWVhbnMgdGhlIGluaXRpYWwgZnJvbnQgZmFjZXMgYXJlIHNob3dpbmcsIDEgbWVhbnMgdGhlIGluaXRpYWwgYmFjayBmYWNlcyBhcmUgc2hvd2luZy5cbiAgICAgICAgdGhpcy5jb2x1bW5zUm93cyA9IFs3LDZdO1xuICAgICAgICB0aGlzLnBsYW5lcyA9IFtdO1xuXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVUcmFuc2l0aW9ucygpO1xuICAgICAgICB0aGlzLl9jcmVhdGVHcmlkKCk7XG5cbiAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25zW3RoaXMudHJhbnNpdGlvbl0oKTtcbiAgICAgICAgICAgIHNldEludGVydmFsKHRoaXMudHJhbnNpdGlvbnNbdGhpcy50cmFuc2l0aW9uXSwgMjAwMCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSAsIDgwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgZ3JpZCB1c2VkIGZvciB0aGUgbGF5b3V0IG9mIHRoZSBkYXkgY2VsbHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jcmVhdGVHcmlkKCkge1xuICAgICAgICBjb25zdCBncmlkID0gbmV3IEdyaWQodGhpcy5jb2x1bW5zUm93c1swXSwgdGhpcy5jb2x1bW5zUm93c1sxXSwgdGhpcy5vcHRpb25zLnNpemUpO1xuXG4gICAgICAgIGZvckxlbmd0aCh0aGlzLmNvbHVtbnNSb3dzWzBdKnRoaXMuY29sdW1uc1Jvd3NbMV0sIGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBsYW5lID0gbmV3IERvdWJsZVNpZGVkUGxhbmUoe1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJ3RlYWwnLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wbGFuZXMucHVzaChwbGFuZSk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgZ3JpZC5zZXRDaGlsZHJlbih0aGlzLnBsYW5lcyk7XG4gICAgICAgIHRoaXMuYWRkKGdyaWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB1cCBgdGhpcy50cmFuc2l0aW9uc2AsIGNvbnRhaW5pbmcgdGhlIGF2YWlsYWJsZSBtb250aC10by1tb250aFxuICAgICAqIHRyYW5zaXRpb25zLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfaW5pdGlhbGl6ZVRyYW5zaXRpb25zKCkge1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25zID0ge1xuICAgICAgICAgICAgZmxpcERpYWdvbmFsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZsaXBTaWRlID0gKyF0aGlzLmZsaXBTaWRlO1xuICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSB3aGljaCBkaW1lbnNpb24gb2YgdGhlIGdyaWQgaXMgc2hvcnRlciBhbmQgd2hpY2ggaXMgbG9uZ2VyLlxuICAgICAgICAgICAgICAgIGxldCBzaG9ydGVzdCA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IGxvbmdlc3Q7XG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5zUm93cy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtIDwgdGhpcy5jb2x1bW5zUm93c1tzaG9ydGVzdF0pXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG9ydGVzdCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgbG9uZ2VzdCA9ICshc2hvcnRlc3Q7XG5cbiAgICAgICAgICAgICAgICAvLyBmb3IgZWFjaCBkaWFnb25hbCBvZiB0aGUgZ3JpZCwgZmxpcCB0aG9zZSBjZWxscy5cbiAgICAgICAgICAgICAgICBmb3JMZW5ndGgodGhpcy5jb2x1bW5zUm93c1swXSt0aGlzLmNvbHVtbnNSb3dzWzFdLTEsIGZ1bmN0aW9uKGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICBmb3JMZW5ndGgodGhpcy5jb2x1bW5zUm93c1tzaG9ydGVzdF0sIGZ1bmN0aW9uKHJvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbi1yb3cgPj0gMCAmJiBjb2x1bW4tcm93IDwgdGhpcy5jb2x1bW5zUm93c1tsb25nZXN0XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBsYW5lID0gdGhpcy5wbGFuZXNbY29sdW1uLXJvdyArIHRoaXMuY29sdW1uc1Jvd3NbbG9uZ2VzdF0qcm93XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGlwT25lKHBsYW5lLCBjb2x1bW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmbGlwT25lKGl0ZW0sIGNvbHVtbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uX190YXJnZXRSb3RhdGlvbiA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5fX3RhcmdldFJvdGF0aW9uID0gbmV3IFRyYW5zaXRpb25hYmxlKDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbmV3IFRyYW5zaXRpb25hYmxlKGl0ZW0uX190YXJnZXRSb3RhdGlvbi5nZXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uX190YXJnZXRSb3RhdGlvbi5zZXQoaXRlbS5fX3RhcmdldFJvdGF0aW9uLmdldCgpK01hdGguUEkpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vaXRlbS5nZXQoKS50cmFuc2Zvcm1Gcm9tKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gVHJhbnNmb3JtLnJvdGF0ZVkocm90YXRpb24uZ2V0KCkpO1xuICAgICAgICAgICAgICAgICAgICAvL30pO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNoaWxkcmVuWzBdLmdldCgpLnRyYW5zZm9ybUZyb20oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVHJhbnNmb3JtLnJvdGF0ZVkocm90YXRpb24uZ2V0KCkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jaGlsZHJlblsxXS5nZXQoKS50cmFuc2Zvcm1Gcm9tKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRyYW5zZm9ybS5yb3RhdGVZKHJvdGF0aW9uLmdldCgpK01hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRpb24uc2V0KGl0ZW0uX190YXJnZXRSb3RhdGlvbi5nZXQoKSwgeyBkdXJhdGlvbjogMjAwMCwgY3VydmU6IEVhc2luZy5vdXRFeHBvIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LCAwKzUwKmNvbHVtbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXI7XG4iXSwibmFtZXMiOlsic3VwZXIiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7QUFTQSxPQUFPLFNBQVMsTUFBTSwyQkFBMkIsQ0FBQztBQUNsRCxPQUFPLGNBQWMsTUFBTSx1Q0FBdUMsQ0FBQztBQUNuRSxPQUFPLE1BQU0sTUFBTSwrQkFBK0IsQ0FBQzs7QUFFbkQsT0FBTyxRQUFRLE1BQU0sWUFBWSxDQUFDO0FBQ2xDLE9BQU8sSUFBSSxNQUFNLFFBQVEsQ0FBQztBQUMxQixPQUFPLGdCQUFnQixNQUFNLG9CQUFvQixDQUFDOztBQUVsRCxPQUFPLFNBQVMsTUFBTSxzQkFBc0IsQ0FBQzs7Ozs7Ozs7QUFRN0MsT0FBTyxJQUFNLFFBQVEsR0FBaUI7SUFBQyxBQVduQyxpQkFBVyxDQUFDLFlBQVksRUFBRSxVQUFVLEVBQUU7UUFDbENBLFFBQUssS0FBQSxDQUFDLE1BQUEsQ0FBQyxJQUFJLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQzs7UUFFNUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDbEIsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQzs7UUFFakIs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