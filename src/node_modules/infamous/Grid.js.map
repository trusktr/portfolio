{"version":3,"sources":["src/Grid.js"],"names":["Grid","columns","rows","size","cellNodes","options","setOptions","undefined","_createGridCell","bind","index","column","row","Math","floor","cellSize","mod","align","origin","transform","translate","mod2","push","add","children"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;;;;AACA;;;;AAEA;;;;AAEA;;;;;;AAEA;;;;;;;;;;;AAhBA;;;;;;;;;IA2BaA,I,WAAAA,I;;;AAET;;;;;;;;;AASA,kBAAYC,OAAZ,EAAqBC,IAArB,EAA2BC,IAA3B,EAAiC;AAAA;;AAAA,sIACvB,EAACA,MAAMA,IAAP,EADuB;;AAG7B,cAAKF,OAAL,GAAeA,OAAf;AACA,cAAKC,IAAL,GAAYA,IAAZ;AACA,cAAKE,SAAL,GAAiB,EAAjB;;AAEA,YAAI,OAAO,MAAKC,OAAL,CAAaF,IAApB,KAA6B,WAAjC,EAA8C;AAAE,kBAAKG,UAAL,CAAgB,EAACH,MAAM,CAACI,SAAD,EAAYA,SAAZ,CAAP,EAAhB;AAAkD;;AAElG,iCAAU,MAAKN,OAAL,GAAa,MAAKC,IAA5B,EAAkC,MAAKM,eAAL,CAAqBC,IAArB,OAAlC;AAT6B;AAUhC;;AAED;;;;;;;;;;wCAMgBC,K,EAAO;AACnB,gBAAMC,SAASD,QAAQ,KAAKT,OAA5B;AACA,gBAAMW,MAAMC,KAAKC,KAAL,CAAWJ,QAAQ,KAAKT,OAAxB,CAAZ;;AAEA,gBAAIc,WAAW,IAAf;AACA,gBAAI,OAAO,KAAKV,OAAL,CAAaF,IAAb,CAAkB,CAAlB,CAAP,IAA+B,WAA/B,IAA8C,OAAO,KAAKE,OAAL,CAAaF,IAAb,CAAkB,CAAlB,CAAP,IAA+B,WAAjF,EAA8F;AAC1FY,2BAAW,EAAX;AACAA,yBAAS,CAAT,IAAc,KAAKV,OAAL,CAAaF,IAAb,CAAkB,CAAlB,IAAqB,KAAKF,OAAxC;AACAc,yBAAS,CAAT,IAAc,KAAKV,OAAL,CAAaF,IAAb,CAAkB,CAAlB,IAAqB,KAAKD,IAAxC;AACH;;AAED,gBAAMc,MAAM,uBAAa;AACrBC,uBAAO,CAAC,CAAD,EAAG,CAAH,CADc;AAErBC,wBAAQ,CAAC,CAAD,EAAG,CAAH,CAFa;AAGrBf,sBAAMY,WAAU,CAACA,SAAS,CAAT,CAAD,EAAcA,SAAS,CAAT,CAAd,CAAV,GAAsC,CAACR,SAAD,EAAYA,SAAZ,CAHvB;AAIrBY,2BAAW,oBAAUC,SAAV,CAAoBT,SAAOI,SAAS,CAAT,CAA3B,EAAuCH,MAAIG,SAAS,CAAT,CAA3C,EAAuD,CAAvD;AAJU,aAAb,CAAZ;AAMA,gBAAMM,OAAO,uBAAa;AACtB;AACAJ,uBAAO,CAAC,GAAD,EAAK,GAAL,CAFe;AAGtBC,wBAAQ,CAAC,GAAD,EAAK,GAAL;AAHc,aAAb,CAAb;AAKA;AACA,iBAAKd,SAAL,CAAekB,IAAf,CAAoB,KAAKC,GAAL,CAASP,GAAT,EAAcO,GAAd,CAAkBF,IAAlB,CAApB;AACH;;AAED;;;;;;;;oCAKYG,Q,EAAU;AAClB,qCAAU,KAAKvB,OAAL,GAAa,KAAKC,IAA5B,EAAkC,UAASQ,KAAT,EAAgB;AAC9C;AACA,qBAAKN,SAAL,CAAeM,KAAf,EAAsBa,GAAtB,CAA0BC,SAASd,KAAT,CAA1B;AACH,aAHiC,CAGhCD,IAHgC,CAG3B,IAH2B,CAAlC;AAIA,mBAAO,IAAP;AACH;;;;;kBAEUT,I","file":"Grid.js","sourcesContent":["/*\n * LICENSE\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n */\n\nimport Modifier from 'famous/src/core/Modifier';\nimport Transform from 'famous/src/core/Transform';\n\nimport Molecule from './Molecule';\n\nimport forLength from 'army-knife/forLength';\n\n/**\n * A scenegraph tree with a variable number of leaf node Modifiers (the grid\n * cells) that are arranged in a grid. Add any [famous/src/core/RenderNode](#famous/src/core/RenderNode)-compatible\n * item to each leafnode of the grid.\n *\n * TODO: Use Molecule instead of Modifier for the grid cells.\n * TODO: Add an options parameter, that the Molecule constructor will handle.\n *\n * @class Grid\n * @extends Molecule\n */\nexport class Grid extends Molecule {\n\n    /**\n     * Creates a new Grid having the specified number of columns, number of rows,\n     * and famo.us-style size.\n     *\n     * @constructor\n     * @param {Number} columns The integer number of columns.\n     * @param {Number} rows The integer number of rows.\n     * @param {Array} size A famo.us-style width/height size array.\n     */\n    constructor(columns, rows, size) {\n        super({size: size});\n\n        this.columns = columns;\n        this.rows = rows;\n        this.cellNodes = [];\n\n        if (typeof this.options.size === 'undefined') { this.setOptions({size: [undefined, undefined]}); }\n\n        forLength(this.columns*this.rows, this._createGridCell.bind(this));\n    }\n\n    /**\n     * Creates a grid cell at the given index.\n     *\n     * @private\n     * @param {Number} index The integer index of the grid cell.\n     */\n    _createGridCell(index) {\n        const column = index % this.columns;\n        const row = Math.floor(index / this.columns);\n\n        let cellSize = null;\n        if (typeof this.options.size[0] != 'undefined' && typeof this.options.size[1] != 'undefined') {\n            cellSize = [];\n            cellSize[0] = this.options.size[0]/this.columns;\n            cellSize[1] = this.options.size[1]/this.rows;\n        }\n\n        const mod = new Modifier({\n            align: [0,0],\n            origin: [0,0],\n            size: cellSize? [cellSize[0], cellSize[1]]: [undefined, undefined],\n            transform: Transform.translate(column*cellSize[0],row*cellSize[1],0)\n        });\n        const mod2 = new Modifier({\n            //transform: Transform.rotateY(Math.PI/10),\n            align: [0.5,0.5],\n            origin: [0.5,0.5]\n        });\n        // FIXME: ^^^ Why do I need an extra Modifier to align stuff in the middle of the grid cells?????\n        this.cellNodes.push(this.add(mod).add(mod2));\n    }\n\n    /**\n     * Sets the items to be layed out in the grid.\n     *\n     * @param {Array} children An array of [famous/src/core/RenderNode](#famous/src/core/RenderNode)-compatible items.\n     */\n    setChildren(children) {\n        forLength(this.columns*this.rows, function(index) {\n            //this.cellNodes[index].set(null); // TODO: how do we erase previous children?\n            this.cellNodes[index].add(children[index]);\n        }.bind(this));\n        return this;\n    }\n}\nexport default Grid;\n"]}