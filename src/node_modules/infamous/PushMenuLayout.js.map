{"version":3,"sources":["src/PushMenuLayout.js"],"names":["PushMenuLayout","initialOptions","_","defaultOptions","menuSide","menuWidth","menuHintSize","pushAreaWidth","animationDuration","animationType","fade","fadeStartColor","fadeEndColor","blur","blurRadius","options","contentWidth","document","body","clientWidth","isOpen","isOpening","isClosing","isAnimating","isBeingDragged","transitionCallback","undefined","register","touch","_createComponents","_initializeEvents","newOptions","layout","touchSync","alignment","animationTransition","mainMol","menuMol","size","oldTransform","transform","currentPosition","get","setTranslateX","bind","menuContentMol","contentMol","setRotateY","Math","PI","depth","setTranslateZ","menuTouchPlane","properties","zIndex","setOptions","origin","align","updateStyles","startColor","endColor","styles","background","filter","fadeStylesheet","detach","createStyleSheet","attach","fadePlane","classes","pointerEvents","opacity","add","handler","on","event","_haltAnimation","set","delta","closeMenu","openMenu","window","addEventListener","pipe","node","callback","cancelPreviousCallback","_animate","targetState","_callback","self","setupCallback","numberOfTransitions","duration","curve","outExpo","cancelCallback","halt","momentaryBlur","_child","setProperties","surface"],"mappings":"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","file":"PushMenuLayout.js","sourcesContent":["/*\n * LICENSE\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n */\n\nimport jss from './jss';\n\nimport Surface from 'famous/src/core/Surface';\nimport Transitionable from 'famous/src/transitions/Transitionable';\nimport Easing from 'famous/src/transitions/Easing';\nimport TouchSync from 'famous/src/inputs/TouchSync';\nimport GenericSync from 'famous/src/inputs/GenericSync';\n\nimport Plane from './Plane';\nimport Molecule from './Molecule';\nimport {simpleExtend} from './utils'\n\nimport callAfter from 'army-knife/callAfter';\n\n/**\n * A scenegraph with two Molecule leafnodes: the menu area and the content\n * area. The menu area is hidden beyond the edge of the screen while the\n * content area is visible. Swiping in from the edge of the screen reveals the\n * menu, putting the content area out of focus. A mouse can also be used, and\n * hovering near the edge of the screen also reveals the menu.\n *\n * Note: This layout is mostly useful if it exists at the root of a context so\n * that the menu is clipped when it is closed (off to the side), otherwise the\n * menu will be visible beyond the boundary of the container that contains the\n * PushMenuLayout.\n *\n * Note: If you've called `openMenu` or `closeMenu` with a callback, the callback\n * will be canceled if a drag or hover on the menu happens before the animation\n * has completed. Please open an issue on GitHub if you have any opinion\n * against this. :) Maybe we can add a boolean option for this behavior.\n *\n * TODO: Embed working example here.\n *\n * @class PushMenuLayout\n * @extends Molecule\n */\nexport class PushMenuLayout extends Molecule {\n\n    /**\n     * Creates a new PushMenuLayout.\n     *\n     * @constructor\n     * @param {Object} options The options to instantiate a `PushMenuLayout` with.\n     *\n     * TODO v0.1.0: Handle `PushMenuLayout`-specific user options. Currently they\n     * just get passed into super() for the Molecule constructor to handle.\n     */\n    constructor(initialOptions) {\n        super(initialOptions);\n\n        // Add default values for this PushMenuLayout\n        // TODO: Make default options static for the class.\n        simpleExtend(this._.defaultOptions, {\n            menuSide: 'left', // left or right\n            menuWidth: 200,\n            menuHintSize: 10, // the amount of the menu that is visible before opening the menu.\n            pushAreaWidth: 40, // the area on the screen edge that the user can touch and drag to push out the menu.\n            animationDuration: 1000,\n            animationType: 'foldDown', // options: foldDown moveBack\n\n            // TODO: Background color for the whole layout should be the color that the fade fades to.\n            // TODO: Replace fade star/end colors with a fog color value and intensity.\n            fade: true, // when content recedes, it fades into the fog.\n            fadeStartColor: 'rgba(255,255,255,0)',\n            fadeEndColor: 'rgba(255,255,255,1)',\n\n            blur: false, // XXX: WIP, so false by default.\n            blurRadius: 5\n        })\n\n        // TODO: performance hit, this setter is invoked in the Molecule constructor, then here again.\n        this.options = initialOptions\n\n        // TODO v0.1.0: Mark these as private.\n            // TODO v0.1.0: this.contentWidth should be the width of whatever is containing\n            // the layout, but we're just using it as a whole-page app for now. Get\n            // size from a commit? UPDATE: See the new famous/src/views/SizeAwareView\n            this.contentWidth = document.body.clientWidth - this.options.menuHintSize;\n\n            // Changing these values outside of an instance of PushMenuLayout might\n            // cause the layout to break. They are designed to be modified\n            // internally only.\n            this.isOpen = false;\n            this.isOpening = false;\n            this.isClosing = false;\n            this.isAnimating = false; // keep track of whether the menu is opening or closing.\n            this.isBeingDragged = false; // whether the user is dragging/pushing the menu or not.\n            this.transitionCallback = undefined; // holds the callback to the current open or close menu animation.\n\n        // Set the touch sync for pulling/pushing the menu open/closed.\n        GenericSync.register({\n            touch: TouchSync\n        });\n\n        this._createComponents();\n        this._initializeEvents();\n    }\n\n    /**\n     * See Molecule.setOptions\n     *\n     * @override\n     */\n    setOptions(newOptions) {\n        super.setOptions(newOptions)\n    }\n\n    /**\n     * See Molecule.resetOptions\n     *\n     * @override\n     */\n    resetOptions() {\n        super.resetOptions()\n    }\n\n    /**\n     * Creates the menu area, content area, `Plane` for the fade effect, etc.\n     *\n     * @private\n     */\n    _createComponents() {\n        var layout = this;\n\n        this.touchSync = new GenericSync(['touch']);\n\n        this.alignment = (this.options.menuSide == \"left\"? 0: 1);\n        this.animationTransition = new Transitionable(0);\n\n        this.mainMol = new Molecule();\n\n        this.menuMol = new Molecule({\n            size: [this.options.menuWidth,undefined]\n        });\n        this.menuMol.oldTransform = this.menuMol.transform;\n        this.menuMol.transform = function() { // override\n            var currentPosition = layout.animationTransition.get();\n            switch(layout.options.animationType) {\n                case \"foldDown\":\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setTranslateX(\n                        layout.options.menuSide == 'left'?\n                            currentPosition *  (layout.options.menuWidth-layout.options.menuHintSize)/*range*/ - (layout.options.menuWidth-layout.options.menuHintSize)/*offset*/:\n                            currentPosition * -(layout.options.menuWidth-layout.options.menuHintSize)/*range*/ + (layout.options.menuWidth-layout.options.menuHintSize)/*offset*/\n                    );\n                    break;\n                case \"moveBack\":\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setTranslateX(\n                        layout.options.menuSide == 'left'?\n                            currentPosition *  (layout.options.menuWidth-layout.options.menuHintSize)/*range*/ - (layout.options.menuWidth-layout.options.menuHintSize)/*offset*/:\n                            currentPosition * -(layout.options.menuWidth-layout.options.menuHintSize)/*range*/ + (layout.options.menuWidth-layout.options.menuHintSize)/*offset*/\n                    );\n                    break;\n            }\n            return this.oldTransform.get();\n        }.bind(this.menuMol);\n\n        // contains the user's menu content.\n        this.menuContentMol = new Molecule();\n\n        this.contentMol = new Molecule({\n            size: [this.contentWidth,undefined]\n        });\n        this.contentMol.oldTransform = this.contentMol.transform;\n        this.contentMol.transform = function() { // override\n            var currentPosition = layout.animationTransition.get();\n            switch(layout.options.animationType) {\n                case \"foldDown\":\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setTranslateX(\n                        layout.options.menuSide == 'left'?\n                            currentPosition *  (layout.options.menuWidth - layout.options.menuHintSize)/*range*/ + layout.options.menuHintSize/*offset*/:\n                            currentPosition * -(layout.options.menuWidth - layout.options.menuHintSize)/*range*/ - layout.options.menuHintSize/*offset*/\n                    );\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setRotateY(\n                        layout.options.menuSide == 'left'?\n                            currentPosition *  Math.PI/8:\n                            currentPosition * -Math.PI/8\n                    );\n                    break;\n                case \"moveBack\":\n                    var depth = 100;\n                    // XXX: this is depending on my modifications for TransitionableTransform.\n                    this.oldTransform.setTranslateX(\n                        layout.options.menuSide == 'left'?\n                            layout.options.menuHintSize:\n                            -layout.options.menuHintSize\n                    );\n                    this.oldTransform.setTranslateZ(\n                        currentPosition * -depth\n                    );\n                    break;\n            }\n            return this.oldTransform.get();\n        }.bind(this.contentMol);\n\n        this.menuTouchPlane = new Plane({\n            size: [this.options.menuWidth + this.options.pushAreaWidth - this.options.menuHintSize, undefined],\n            properties: {\n                zIndex: '-1000' // below everything\n            }\n        });\n\n        this.mainMol.setOptions({\n            origin: [this.alignment, 0.5],\n            align: [this.alignment, 0.5]\n        });\n        this.menuMol.setOptions({\n            origin: [this.alignment, 0.5],\n            align: [this.alignment, 0.5]\n        });\n        this.contentMol.setOptions({\n            origin: [this.alignment, 0.5],\n            align: [this.alignment, 0.5]\n        });\n\n        // FIXME: WHY THE EFF must I also set align and origin on menuTouchPlane\n        // when I've already set it on it's parent (this.menuMol)?????\n        this.menuTouchPlane.setOptions({\n            origin: [this.alignment, 0.5],\n            align: [this.alignment, 0.5]\n        });\n\n        // Bring the menu content molecule and touch plane forward just\n        // slightly so they're just above the content and content's fade plane,\n        // so touch and mouse interaction works. HTML, the bad parts. ;)\n        this.menuContentMol.transform.setTranslateZ(2);\n        this.menuTouchPlane.transform.setTranslateZ(2);\n\n        /*\n         * Styles for the fadePlane\n         */\n        // TODO: move this somewhere else . it's specific for each animation\n        this.updateStyles = function() {\n            var startColor\n            var endColor\n\n            switch(this.options.animationType) {\n                case \"foldDown\":\n                    startColor = this.options.fadeStartColor\n                    endColor = this.options.fadeEndColor\n                    break;\n                case \"moveBack\":\n                    startColor = endColor = this.options.fadeEndColor\n                    break;\n            }\n\n            var styles = {\n                '.infamous-fadeLeft': {\n                    background: [\n                        endColor,\n                        '-moz-linear-gradient(left, '+endColor+' 0%, '+startColor+' 100%)',\n                        '-webkit-gradient(left top, right top, color-stop(0%, '+endColor+'), color-stop(100%, '+startColor+'))',\n                        '-webkit-linear-gradient(left, '+endColor+' 0%, '+startColor+' 100%)',\n                        '-o-linear-gradient(left, '+endColor+' 0%, '+startColor+' 100%)',\n                        '-ms-linear-gradient(left, '+endColor+' 0%, '+startColor+' 100%)',\n                        'linear-gradient(to right, '+endColor+' 0%, '+startColor+' 100%)'\n                    ],\n                    filter: 'progid:DXImageTransform.Microsoft.gradient( startColorstr=\\'#cc000000\\', endColorstr=\\'#4d000000\\', GradientType=1 )'\n                },\n                '.infamous-fadeRight': {\n                    background: [\n                        startColor,\n                        '-moz-linear-gradient(left, '+startColor+' 0%, '+endColor+' 100%)',\n                        '-webkit-gradient(left top, right top, color-stop(0%, '+startColor+'), color-stop(100%, '+endColor+'))',\n                        '-webkit-linear-gradient(left, '+startColor+' 0%, '+endColor+' 100%)',\n                        '-o-linear-gradient(left, '+startColor+' 0%, '+endColor+' 100%)',\n                        '-ms-linear-gradient(left, '+startColor+' 0%, '+endColor+' 100%)',\n                        'linear-gradient(to right, '+startColor+' 0%, '+endColor+' 100%)'\n                    ],\n                    filter: 'progid:DXImageTransform.Microsoft.gradient( startColorstr=\\'#4d000000\\', endColorstr=\\'#cc000000\\', GradientType=1 )'\n                }\n            };\n\n            if (this.fadeStylesheet) { this.fadeStylesheet.detach(); }\n            this.fadeStylesheet = jss.createStyleSheet(styles);\n            this.fadeStylesheet.attach();\n        };\n\n        if (this.options.fade) {\n            this.updateStyles();\n\n            this.fadePlane = new Plane({\n                size: [undefined,undefined],\n                classes: [\n                    // TODO: switch to jss namespace.\n                    (this.options.menuSide == 'left'? 'infamous-fadeRight': 'infamous-fadeLeft')\n                ],\n                properties: {\n                    zIndex: '1000',\n                    pointerEvents: 'none'\n                }\n            });\n\n            // FIXME: Why the EFF must I also set align and origin on fadePlane when\n            // I've already set it on it's parent (this.contentMol)?????\n            this.fadePlane.setOptions({\n                origin: [this.alignment, 0.5],\n                align: [this.alignment, 0.5]\n            });\n\n            // move the fadePlane forward by 1px so it doesn't glitch out.\n            // Chrome will make the fadePlane and the surface in the content\n            // area (if any) blink randomly when the two surfaces are in the\n            // same exact position together.\n            this.fadePlane.transform.setTranslateZ(1);\n\n            this.fadePlane.setOptions({\n                opacity: this.animationTransition\n            });\n\n            // TODO: Make fadePlane a sibling to menuMol and contentMol so that\n            // contentMol contains only the user;s content. This will affect\n            // the code in this.render().\n            this.contentMol.add(this.fadePlane);\n        }\n\n        this.add(this.mainMol);\n        this.mainMol.add(this.contentMol);\n        this.menuMol.add(this.menuTouchPlane);\n        this.menuMol.add(this.menuContentMol);\n        this.mainMol.add(this.menuMol);\n        // TODO: Also create and add a background plane for the menu area so it will catch events that might fall through the menu content.\n    }\n\n    /**\n     * Sets up the events for the touch and mouse interaction that opens and\n     * closes the menu.\n     *\n     * @private\n     */\n    _initializeEvents() {\n\n        // move the menu, following the user's drag. Don't let the user drag the menu past the menu width.\n        this.options.handler.on('update', function(event) { // update == drag\n            this.isBeingDragged = true;\n\n            // stop the current transitions if any, along with the current callback if any.\n            this._haltAnimation(true);\n\n            var currentPosition = this.animationTransition.get();\n\n            // TODO: handle the right-side menu.\n            switch(this.options.animationType) {\n                case \"foldDown\":\n                    this.animationTransition.set(currentPosition + event.delta[0] / (this.options.menuWidth - this.options.menuHintSize));\n                    break;\n                case \"moveBack\":\n                    this.animationTransition.set(currentPosition + event.delta[0] / (this.options.menuWidth - this.options.menuHintSize));\n                    break;\n            }\n\n            currentPosition = this.animationTransition.get();\n\n            if (currentPosition > 1) {\n                this.animationTransition.set(1);\n            }\n            else if (currentPosition < 0) {\n                this.animationTransition.set(0);\n            }\n        }.bind(this));\n\n        this.options.handler.on('end', function(event) {\n            this.isBeingDragged = false;\n\n            var currentPosition = this.animationTransition.get();\n\n            if (currentPosition < 0.5) {\n                this.closeMenu();\n            }\n            else {\n                this.openMenu();\n            }\n        }.bind(this));\n\n        // TODO v0.1.0: Use a SizeAwareView instead of relying on the body, since we\n        // might not be directly in the body.\n        window.addEventListener('resize', function(event) {\n            this.contentWidth = document.body.clientWidth - this.options.menuHintSize;\n            this.contentMol.setOptions({size: [this.contentWidth, undefined]});\n        }.bind(this));\n\n        /*\n         * Wire up events\n         * TODO: consolidate dup code here and in setMenu\n         */\n        this.menuTouchPlane.pipe(this.touchSync);\n        this.menuTouchPlane.on('mouseenter', function() {\n            if (!this.isOpening) {\n                this.openMenu();\n            }\n        }.bind(this))\n        this.menuTouchPlane.on('mouseleave', function() {\n            if (!this.isClosing) {\n                this.closeMenu();\n            }\n        }.bind(this))\n        this.touchSync.pipe(this.options.handler);\n    }\n\n    /**\n     * Add a scenegraph to the content area of the PushMenuLayout. You can put\n     * anything you want into the content area (magical 3D things for example),\n     * just be careful not to let them cover the menu or you'll block the user\n     * from interacting with the menu.\n     *\n     * @param {module: famous/src/core/RenderNode} node A scenegraph, i.e. a\n     * RenderNode with stuff in it.\n     *\n     * TODO: Accept plain renderables, f.e. Surfaces, etc. This change requires\n     * also modifying the code in this.render() to account for renderables.\n     *\n     * TODO: Make a sibling method to reset the content area.\n     */\n    setContent(node) {\n        this.contentMol.add(node)\n    }\n\n    /**\n     * Add a scenegraph to the menu area of the PushMenuLayout. If the object\n     * that you pass into setMenu is an infamous component, or a famo.us\n     * Surface, then it's events will be piped to this PushMenuLayout's input\n     * sync so that the user can open and close the menu with touch or mouse.\n     * General advice here would be to keep whatever you put into the menu\n     * contained within the boundaries of the menu or you might have touch and\n     * mouse interaction outside of the menu.\n     *\n     * @param {module: famous/src/core/RenderNode} node A scenegraph, i.e. a\n     * RenderNode with stuff in it.\n     *\n     * TODO: Accept plain renderables, f.e. Surfaces, etc.\n     *\n     * TODO: Remove old content before adding new content.\n     */\n    setMenu(node) {\n        this.menuContentMol.add(node)\n        if (node instanceof Molecule) {\n            node.pipe(this.touchSync)\n            node.on('mouseenter', function() {\n                if (!this.isOpening) {\n                    this.openMenu();\n                }\n            }.bind(this))\n            node.on('mouseleave', function() {\n                if (!this.isClosing) {\n                    this.closeMenu();\n                }\n            }.bind(this))\n        }\n    }\n\n    // TODO: replace menu easing with physics so the user can throw the menu,\n    // using initial velocity and drag to slow it down, and stop immediately\n    // when it hits the fully-open or fully-closed positions.\n\n    /**\n     * Opens the menu.\n     *\n     * @param {Function} callback The function to be called when the animation finishes.\n     * @param {boolean} [cancelPreviousCallback=false] This is optional. If\n     * true, then the callback of a previous open or close animation will be\n     * canceled if that animation was still inprogress when this method is\n     * called, otherwise the callback of the previous open or close animation\n     * will be fired immediately before the animation for this animation begins.\n     */\n    openMenu(callback, cancelPreviousCallback) {\n        this._haltAnimation(cancelPreviousCallback);\n\n        this.isClosing = false;\n        this.isOpening = true;\n\n        this._animate('open', callback);\n    }\n\n    /**\n     * Closes the menu.\n     *\n     * @param {Function} callback The function to be called when the animation finishes.\n     * @param {boolean} [cancelPreviousCallback=false] This is optional. If\n     * true, then the callback of a previous open or close animation will be\n     * canceled if that animation was still inprogress when this method is\n     * called, otherwise the callback of the previous open or close animation\n     * will be fired immediately before the animation for this animation begins.\n     */\n    closeMenu(callback, cancelPreviousCallback) {\n        this._haltAnimation(cancelPreviousCallback);\n\n        this.isClosing = true;\n        this.isOpening = false;\n\n        this._animate('close', callback);\n    }\n\n    /**\n     * Toggles the menu open or closed. If the menu is open or is opening, then it will now start\n     * closing, and vice versa.\n     *\n     * @param {Function} callback The function to be called when the animation finishes.\n     * @param {boolean} [cancelPreviousCallback=false] This is optional. If\n     * true, then the callback of a previous open or close animation will be\n     * canceled if that animation was still inprogress when this method is\n     * called, otherwise the callback of the previous open or close animation\n     * will be fired immediately before the animation for this animation begins.\n     */\n    toggleMenu(callback, cancelPreviousCallback) {\n        if (this.isOpen || this.isOpening) {\n            this.closeMenu(callback, cancelPreviousCallback);\n        }\n        else if (!this.isOpen || this.isClosing) {\n            this.openMenu(callback, cancelPreviousCallback);\n        }\n    }\n\n    /**\n     * Animates the menu to it's target state.\n     *\n     * @private\n     * @param {String} targetState The name of the state to animate to.\n     * @param {Function} callback The function to call after the animation completes.\n     */\n    _animate(targetState, callback) {\n        this.isAnimating = true;\n        this.transitionCallback = callback;\n        var _callback;\n\n        var self = this;\n        function setupCallback(numberOfTransitions) {\n            // Fire callback after numberOfTransitions calls, when the 4 transitions are complete.\n            _callback = callAfter(numberOfTransitions, function() {\n                self.isAnimating = self.isOpening = self.isClosing = false;\n                self.isOpen = targetState == 'open'? true: false;\n                if (typeof self.transitionCallback == 'function') {\n                    self.transitionCallback();\n                }\n                self.transitionCallback = undefined;\n            }.bind(self));\n        }\n\n        setupCallback(1);\n        if (targetState == 'open') {\n            this.animationTransition.set(1, {duration: this.options.animationDuration, curve: Easing.outExpo}, _callback);\n        }\n        else if (targetState == 'close') {\n            this.animationTransition.set(0, {duration: this.options.animationDuration, curve: Easing.outExpo}, _callback);\n        }\n    }\n\n    /**\n     * Halts the current animation, if any.\n     *\n     * @private\n     * @param {boolean} [cancelCallback=false] Defaults to false. If true, the\n     * halted animation's callback won't fire, otherwise it will be fired.\n     */\n    _haltAnimation(cancelCallback) {\n        if (this.isAnimating) {\n            if (!cancelCallback && typeof this.transitionCallback == 'function') {\n                this.transitionCallback();\n            }\n            this.transitionCallback = undefined;\n            this.animationTransition.halt();\n        }\n    }\n\n    /**\n     * @override\n     */\n    render() {\n\n        // Blur the content if this.options.blur is true, and the animation is moveBack.\n        //\n        // TODO: Make the item to to be blur specifiable, perhaps with a method on\n        // this.\n        if (this.options.blur && this.options.fade && this.options.animationType == 'moveBack') {\n            let momentaryBlur = (this.animationTransition.get() * this.options.blurRadius)\n            let filter = {\n                \"-webkit-filter\": 'blur('+momentaryBlur+'px)',\n                \"-moz-filter\":    'blur('+momentaryBlur+'px)',\n                \"-ms-filter\":     'blur('+momentaryBlur+'px)',\n                \"-o-filter\":      'blur('+momentaryBlur+'px)',\n                filter:           'blur('+momentaryBlur+'px)'\n            }\n\n            // TODO TODO TODO v0.1.0: Make fadePlane a sibling with menu and\n            // content molecules or the following breaks if fade is false.\n            // Then remove the check for this.options.fade in the previous if\n            // statement above.\n            if (this.contentMol._child[1].get() instanceof Surface) {\n                this.contentMol.get().setProperties(filter)\n            }\n            else if (this.contentMol._child[1] instanceof Plane) {\n                this.contentMol._child[1].surface.setProperties(filter)\n            }\n        }\n\n        return super.render()\n    }\n}\nexport default PushMenuLayout;\n"]}